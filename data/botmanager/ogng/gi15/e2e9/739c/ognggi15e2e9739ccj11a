{"data":{"timer":[],"css":"","data":[],"name":"settings","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.ready = function(){\n  sendGetSettings(null, null, null, function(result) {\n\t  if (result.status == 'ok') {\n//\t\tresult = JSON.parse('{ \"msg\": \"'+result.msg+'\" }');\n\t    $('#devicename').val(result.machineid);\n\t    $('#portnum').val(result.portnum);\n        $('#botlist')[0].api.populateBotList(result.defaultbot);\n\t  }\n\t  else {\n\t\t  $('#hidesettings').css('display', 'none');\n\t\t  $('#settingserror').css('display', 'block');\n\t\t  $('#settingserror').html('<b>ERROR: '+result.msg+'<\/b>');\n\t\t  window.location = 'login.html';\n\t  }\n  });\n};\n\nfunction sendGetSettings(machineid,portnum, defaultbot,cb) {\n\tvar params = '';\n\tif (machineid) params += 'machineid='+machineid+'&';\n\tif (portnum) params += 'portnum='+portnum+'&';\n\tif (defaultbot) params += 'defaultbot='+defaultbot;\n\tjson('../botmanager/getsettings', params, cb);\n}\n\nfunction saveSettings() {\n  var mid = escape($('#devicename').val());\n  var portnum = escape($('#portnum').val());\n  var defaultbot = escape($('#defaultbot').val());\n  \n  sendGetSettings(mid, portnum, defaultbot, function(result) {\n    $('#settingsmsg').html(\"<i>Your settings have been saved. You will need to restart this device for your changes to take effect.<\/i>\");\n  });\n}\n\n$('#savesettingsbutton').click(saveSettings);","groups":"anonymous","html":"<div id='settingserror'>\n<\/div>\n<div id='hidesettings'>\n\t<div data-role=\"fieldcontain\">\n\t\t<label for='devicename'>Device Name:<\/label> <input type='text' id='devicename' value=''> \n\t<\/div>\n\t<div data-role=\"fieldcontain\">\n\t\t<label for='devicename'>Port Number:<\/label> <input type='text' id='portnum' value=''> \n\t<\/div>\n\t<div data-role=\"fieldcontain\">\n\t\t<label for='defaultbot'>Default App:<\/label> <select name='defaultbot' id='defaultbot' data-role=\"select\"> \n\t\t\t<option>\n\t\t\t\tABC\n\t\t\t<\/option>\n\t\t<\/select> \n\t<\/div>\n\t<br>\n\t<br>\n\t<div id='settingsmsg'>\n\t<\/div>\n\t<input type='button' value='save' id='savesettingsbutton' data-theme='a'> \n\t<hr>\n  <div class='data-control' data-control='metabot:restartbutton'><\/div>\n<\/div>\n","ctl":"ognggi15e2e9739ccj11a","cmd":[],"three":{"controls":[]},"db":"botmanager","desc":""},"readers":["anonymous"],"id":"ognggi15e2e9739ccj11a","sessionid":"jvgvwg16b7a4d277bt3","time":1561301883106,"addr":"/0:0:0:0:0:0:0:1:44264","username":"admin"}