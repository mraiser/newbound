{"data":{"timer":[],"css":".apitableth {\n  color:white;\n  background-color:black;\n}","data":[],"name":"api","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.ready = function(){\n  if (ME.DATA.appid){\n    if (document.body.securityapps) {\n      var app = document.body.securityapps[ME.DATA.appid];\n      if (app) me.build($(ME).find('.api-outer')[0], app);\n    }\n    else json('../securitybot/listapps', null, function(result){\n      if (result.status == 'ok'){\n        document.body.securityapps = result.data;\n        var app = result.data[ME.DATA.appid];\n        if (app) me.build($(ME).find('.api-outer')[0], app);\n      }\n    });\n  }\n  else me.buildList($(ME).find('.api-outer')[0]);\n};\n\nme.buildList = function(el){\n  json('../securitybot/listapps', null, function(result){\n    if (result.status == 'ok'){\n      \n      var list = [];\n      for (var i in result.data) if (result.data[i].forsale == 'true') list.push(result.data[i]);\n      \n      function compare(a,b) {\n        if (a.name.toLowerCase() < b.name.toLowerCase())\n          return -1;\n        if (a.name.toLowerCase() > b.name.toLowerCase())\n          return 1;\n        return 0;\n      }\n      \n      list.sort(compare);\n\n      for (var i in list) {\n        var app = list[i];\n        $(el).append('<h3>' + app.name + '<\/h3>ID: \"' + app.id + '\"<br><i>' + app.desc + '<\/i><br><br>');\n        \n//        app.include = [ 'trusted', 'files' ];\n        \n        if (app.include && app.include.length>0) commaList(el, app.include, 'include');\n        if (app.exclude && app.exclude.length>0) commaList(el, app.exclude, 'exclude');\n        \n        var el2 = $('<div/>');\n        $(el).append(el2);\n        me.build(el2, app);\n      }\n    }\n  });\n};\n\nme.build = function(el, app){\n  var num = 0;\n  var tab = $('<table class=\"apitable\" border=\"1\" cellspacing=\"0\" cellpadding=\"3\"><tr><th class=\"apitableth\">Command<\/th><th class=\"apitableth\">Permissions<\/th><th class=\"apitableth\">Parameters<\/th><th class=\"apitableth\">Description<\/th><\/tr><\/table>');\n\n  if (app.commands) {\n\n    var list = [];\n    for (var x in app.commands) list.push(x);\n    \n    function compare(a,b) {\n      if (a.toLowerCase() < b.toLowerCase())\n        return -1;\n      if (a.toLowerCase() > b.toLowerCase())\n        return 1;\n      return 0;\n    }\n    \n    list.sort(compare);\n        \n    for (var i in list) {\n      var x = list[i];\n      var comm = app.commands[x];\n      var row = $('<tr/>');\n      \n      row.append('<td>' + x + '<\/td>');\n      \n      var perms = $('<td/>')[0];\n      row.append(perms);\n      if (comm.include && comm.include.length>0) { commaList(perms, comm.include, 'include'); $(perms).append('<br>'); }\n      if (comm.exclude && comm.exclude.length>0) commaList(perms, comm.exclude, 'exclude');\n      \n      var parms = $('<td/>')[0];\n      row.append(parms);\n      commaList(parms, comm.parameters, null);\n      \n      var desc = $('<td/>')[0];\n      row.append(desc);\n      if (comm.desc) $(desc).append(comm.desc);\n      \n      $(tab).find('tbody').append(row);\n      num++;\n    }\n\n  }\n  \n  if (num == 0) $(el).append('<i>There are no commands for this app<\/i>');\n  else $(el).append(tab);\n\n};\n\nfunction commaList(el, list, type){\n  if (type) $(el).append('<b>'+type+': <\/b>');\n  for (var x in list) {\n    $(el).append(list[x]);\n    if(list.length-1 > x) $(el).append(\", \");\n  }\n}","groups":"anonymous","html":"<div class='api-outer'><\/div>","ctl":"quymjx15ed7fb9e45i55","cmd":[],"db":"botmanager","desc":""},"readers":["anonymous"],"id":"quymjx15ed7fb9e45i55","sessionid":"jhtpuq15d03ce0a74q0","time":1541183864920,"addr":"/0:0:0:0:0:0:0:1:63005","username":"mraiser"}