{"data":{"css":".ctl-card {\n  width:100%;\n  height:100%;\n}\n\n.ctl-card > .mdl-card__actions {\n  display: flex;\n  box-sizing:border-box;\n  align-items: center;\n  position:absolute;\n  bottom:0px;\n}\n\n.editcontrolbackbutton{\n  position: absolute;\n  right: 20px;\n}","data":[],"name":"controlsettings","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.ready = function(){\n  var db = ME.DATA.ctldb;\n  var id = ME.DATA.ctlid;\n  var data = ME.DATA.data;\n  var cb = ME.DATA.cb;\n  var index = ME.DATA.index;\n  \n  installControl($(ME).find('.editctlwrap')[0], db, id+'_settings', function(api){\n    me.settings = api;\n  }, data);\n  \n  $(ME).find('.editcontrolbackbutton').click(function(x){\n    $(ME).closest('.popmeup')[0].api.closeAndReset();\n    $(ME).closest('.headsupdisplayinner')[0].api.refresh();\n  });\n  \n  $(ME).find('.savebutton').click(function(){\n    data.title = $('#editcontroltitlefield').val();\n    var pos = $(ME).find('.editcontrolposgoeshere').find('select').val();\n    var i = ME.DATA.list.indexOf(data);\n    ME.DATA.list.splice(i,1);\n    ME.DATA.list.splice(pos,0, data);\n    if (me.settings && me.settings.save) me.settings.save(cb);\n    else cb(data);\n  });\n\n  if (data.title) {\n    $(ME).find('.editctlname').text(data.title);\n    var el = $('#editcontroltitlefield').val(data.title).parent()[0];\n    if (el.MaterialTextfield) el.MaterialTextfield.checkDirty();\n  }\n\n  var n = ME.DATA.list.length;\n  var l = [];\n  while (n-->0) l.unshift(''+n);\n  \n  var d = {\n    \"label\": \"Position\",\n    \"value\": \"\"+index,\n    \"list\": l\n  };\n  installControl($(ME).find('.editcontrolposgoeshere')[0], 'metabot', 'select', function(api){\n    componentHandler.upgradeAllRegistered();\n  }, d);\n\n};","groups":"anonymous","ctl":"jqwkyk168c8d4a6f6w4ade","html":"<div class=\"ctl-card mdl-card mdl-shadow--2dp\">\n  <div class=\"mdl-card__title\">\n    <h2 class=\"mdl-card__title-text\">Edit&nbsp;<span class='editctlname'>Control<\/span><\/h2>\n    \n    <button id=\"editcontrolbackbutton\" class=\"editcontrolbackbutton mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\">\n      <i class=\"material-icons\">close<\/i>\n    <\/button>\n    \n    \n  <\/div>\n  <div class=\"mdl-card__supporting-text\">\n  <div class=\"mdl-card__supporting-text scrollsupport\">\n    <form action=\"#\">\n      <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n        <input class=\"mdl-textfield__input\" type=\"text\" id=\"editcontroltitlefield\">\n        <label class=\"mdl-textfield__label\" for=\"editcontroltitlefield\">Title<\/label>\n      <\/div>\n    <\/form>            \n    <div class='editcontrolposgoeshere'><\/div>\n    <div class='editctlwrap'><\/div>\n  <\/div>\n  <div class=\"mdl-card__actions mdl-card--border\">\n    <a class=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect savebutton\">Save<\/a>\n  <\/div>\n<\/div>\n","three":{"controls":[]},"db":"peerbot","desc":""},"readers":["anonymous"],"id":"jqwkyk168c8d4a6f6w4ade","sessionid":"jvgvwg16b7a4d277bt3","time":1590328654998,"addr":"/0:0:0:0:0:0:0:1:46094","username":"admin"}