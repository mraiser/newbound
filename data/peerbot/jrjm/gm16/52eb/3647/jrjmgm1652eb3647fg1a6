{"data":{"css":"","data":[],"name":"selectpeer","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.ready = function(){\n  if (document.peers) build();\n  else fetch();\n};\n  \nfunction fetch(){\n  json('../peerbot/connections', null, function(result){\n    document.peers = result.data;\n    build();\n  });\n};\n\nfunction build(){\n  var el = $(ME).find('.peerselector')[0];\n\n  var data = ME.DATA;\n  if (!data) data = {};\n  var list = [];\n  for (var i in document.peers) {\n    if (!data.connectedonly || document.peers[i].connected)\n      list.push(document.peers[i]);\n  }\n  if (!data.label) data.label = 'Select Peer';\n  if (data.local) {\n    var l = {\n      \"name\": \"(local)\",\n      \"id\": \"local\"\n    };\n    list.unshift(l);\n  }\n  data.list = list;\n    \n  installControl(el, 'metabot', 'select', function(api){}, data);\n};\n","groups":"anonymous","ctl":"jrjmgm1652eb3647fg1a6","html":"<span class='peerselector'><\/span>","three":{"controls":[],"assets":[],"behaviors":[],"animations":[],"poses":[]},"db":"peerbot","desc":""},"readers":["anonymous"],"id":"jrjmgm1652eb3647fg1a6","sessionid":"jvgvwg16b7a4d277bt3","time":1632668514957,"addr":"/0:0:0:0:0:0:0:1:48226","username":"admin"}