{"data":{"css":"","data":[],"name":"behaviorlist","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.ready = function(api){\n  componentHandler.upgradeAllRegistered();\n  \n  var list = me.list = ME.DATA.behaviors;\n  rebuildBehaviors();\n};\n\nme.dirty = function(){\n  me.parent.dirty();\n};\n\nfunction rebuildBehaviors(){\n  var list = me.list;\n  var el = $(ME).find('.blist');\n  var newhtml = null;\n  if (list.length == 0) newhtml = '<i>No behaviors defined<\/i><br><br>';\n  else{\n    newhtml = '<ul class=\"demo-list-behavior mdl-list\">';\n    for (var i in list){\n      var ctl = list[i];\n      var name = ctl.name ? ctl.name : ctl.id;\n      var params = '';\n      for (var j in ctl.params){\n        if (j != 0) params += ', ';\n        params += ctl.params[j].name;\n      }\n      newhtml += '<li class=\"mdl-list__item mdl-list__item--one-line\" data-index=\"'+i+'\" id=\"li_'+ctl.id+'\"><a class=\"mdl-list__item-secondary-action delctl\" href=\"#\"><i class=\"material-icons\">delete<\/i><\/a>&nbsp;&nbsp;<span class=\"clickme editbehavior\">me.'+name+' = function('+params+');<\/span><\/li>';\n    }\n    newhtml += '<\/ul>';\n  }\n  el.html(newhtml);\n  el.find('.delctl').click(function(e){\n    var i = $(this).closest('.mdl-list__item').data(\"index\");\n    me.list.splice(i,1);\n    me.parent.dirty();\n    rebuildBehaviors();\n  });\n  el.find('.editbehavior').click(function(e){\n    var i = $(this).closest('.mdl-list__item').data(\"index\");\n    var d = me.list[i];\n    var el = $('#'+me.parent.UUID).find('.editbehaviorhere');\n    installControl(el[0], 'metabot', 'editbehavior', function(api){\n      api.parent = me;\n    }, d);\n  });\n};\nme.rebuildBehaviors = rebuildBehaviors;\n\n$(ME).find('.newbehaviorbutton').click(function(e){\n  var d = {};\n  d.name = \"untitled\";\n  d.params = [];\n  d.body = \"var me = this;\\nvar ME = $('#'+me.UUID)[0];\\n\\n\";\n  d.id = guid();\n  me.list.push(d);\n  me.parent.dirty();\n  rebuildBehaviors();\n});","groups":"","ctl":"wxppvv17a4df372e9o14","html":"<h4>Behaviors<\/h4>\n<div class='blist'><\/div>\n<button class=\"newbehaviorbutton mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored\">\n  <i class=\"material-icons\">add<\/i>\n<\/button>\n","three":{"controls":[],"assets":[],"behaviors":[],"animations":[],"poses":[]},"db":"metabot","desc":""},"id":"wxppvv17a4df372e9o14","sessionid":"jvgvwg16b7a4d277bt3","time":1625671752773,"addr":"/0:0:0:0:0:0:0:1:37882","username":"admin"}