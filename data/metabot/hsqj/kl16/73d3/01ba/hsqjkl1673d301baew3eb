{"data":{"timer":[{"name":"init","id":"woljgw1673d68f974o791"}],"css":".popup999{\n  position:absolute;\n}","data":[],"name":"rebootbutton","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nCURRENTDEVICEPREFIX = typeof CURRENTDEVICEPREFIX == 'undefined' ? '../' : CURRENTDEVICEPREFIX;\n\nvar canvas = me.canvas = $(ME).find('canvas')[0];\nvar ctx = me.ctx = canvas.getContext('2d');\n\nme.ready = function(){\n  me.title = 'Reboot Device';\n  me.redraw();\n  $(canvas).hover(function(x){ \n    me.hover = x.type == 'mouseenter';\n    me.redraw();\n  });\n  $(canvas).click(function(){ \n    var el = $('<div class=\"popup999\"/>');\n    $('body').append(el);\n    var data = {\n      title:'Reboot Device',\n      text:'Are you sure you want to reboot the device?',\n      cb:function(){\n        json(CURRENTDEVICEPREFIX+'metabot/call', 'db=metabot&name=rebootbutton&cmd=reboot&args={}', function(result){\n          alert(JSON.stringify(result));\n        });\n      }\n    };\n    installControl(el[0], 'metabot', 'confirmdialog', function(result){}, data);\n  });\n};\n\nme.redraw = function(){\n  var w = $(ME).width();\n  var h = $(ME).height();\n  \n  var L = Math.min(w,h);\n  var offx = (w-L)/2;\n  var offy = (h-L)/2;\n  \n  var fontsize = 18*L/150;\n  var stroke1 = 15*L/150;\n  var stroke2 = 2*L/150;\n\n  var h3 = 130*L/150;\n\n  canvas.width = w;\n  canvas.height = h;\n  \n  ctx.lineWidth = stroke1;\n  ctx.strokeStyle = me.hover ? '#4bff2a' : '#4b8c2a';\n  ctx.fillStyle = me.hover ? '#4bff2a' : '#4b8c2a';\n  \n  var delta = 0.14;\n  var off = L * delta;\n  var bw = L * (1-delta*2);\n  var radius = bw * 0.40;\n  var stroke = bw / 10;\n\n  var rs = radius + stroke + off;\n\n  ctx.beginPath();\n  ctx.arc(rs+offx, rs-off/2, radius, -0.4 * Math.PI , 1.4 * Math.PI, false);\n  ctx.lineWidth = stroke;\n  ctx.stroke();\n  ctx.fillRect(radius + (stroke/2)+off+offx, off/2, stroke, rs);\n  \n  ctx.font = fontsize+\"px Arial\";\n  ctx.fillStyle = '#fff';\n  ctx.lineWidth = stroke2;\n  ctx.strokeStyle = '#000';\n  ctx.textAlign = 'center';\n  ctx.shadowColor = 'black';\n\n  ctx.strokeText(me.title,w/2,h3);\n  ctx.fillText(me.title,w/2,h3);\n};\n","groups":"","ctl":"hsqjkl1673d301baew3eb","html":"<canvas />","cmd":[{"java":"mvjnzq1673d5d929do6ce","name":"reboot","id":"iqylhg1673d5d92a1n6cf"},{"java":"iygrnq1673d647b22t744","name":"addavailablecontrols","id":"uvwvmq1673d647b27s745"}],"db":"metabot","desc":""},"id":"hsqjkl1673d301baew3eb","sessionid":"jhtpuq15d03ce0a74q0","time":1542923549053,"addr":"/0:0:0:0:0:0:0:1:56689","username":"mraiser"}