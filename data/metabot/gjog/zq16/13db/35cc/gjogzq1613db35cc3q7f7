{"data":{"timer":[],"css":".api{\n  padding-top:20px;\n  padding-left:20px;\n  padding-bottom:50px;\n}\n\n.green{\n  background-color:#84bd00;\n  color:white;\n}\n\n.dark{\n  background-color:#505359;\n  color:white;\n}\n\n.mdc-select{\n  position:relative;\n  min-width:200px;\n  height:40px;\n  margin-top:20px;\n}\n\n.mdc-select-title{\n  position:absolute;\n  top:0px;\n  left:0px;\n  font-size:xx-small;\n}\n\n.mdc-select__surface{\n  margin-top:20px;\n  background-color: rgba(255, 255, 255, 0.1);\n  -webkit-font-smoothing: antialiased;\n  font-size: 1rem;\n  line-height: 1.75rem;\n  font-weight: 400;\n  letter-spacing: 0.04em;\n  text-decoration: inherit;\n  text-transform: inherit;\n  --mdc-ripple-fg-size: 0;\n  --mdc-ripple-left: 0;\n  --mdc-ripple-top: 0;\n  --mdc-ripple-fg-scale: 1;\n  --mdc-ripple-fg-translate-end: 0;\n  --mdc-ripple-fg-translate-start: 0;\n  -webkit-tap-highlight-color: transparent;\n  will-change: transform, opacity;\n  display: flex;\n  position: relative;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  width: 100%;\n  height: 56px;\n  border: none;\n  border-radius: 4px 4px 0 0;\n  outline: none;\n  -webkit-appearance: none;\n  overflow: hidden;\n}\n\n.whiteout{\n  position:absolute;\n  top:0px;left:0px;\n  width:100%;\n  height:100%;\n  background-color:white;\n  opacity:0.5;\n  display:none;\n}\n\n.installdiv{\n  position:absolute;\n  margin-left:15px;\n}","data":[],"name":"appinfo","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nvar app = ME.DATA;\n\nme.ready = function(){\n  $(ME).find('.ctlid').text(app.id);\n  $(ME).find('.author').text(app.authorname+' ('+ME.DATA.author+')');\n  $(ME).find('.mdc-card__supporting-text').html(app.desc);\n  if (!app.remote) {\n    installControl($(ME).find('.api')[0], 'botmanager', 'api', function(result){}, {appid:app.id});\n  }\n\n  var isactive = app.isactive;\n  var isupdate = app.isupdate;\n  var isremote = app.remote;\n  \n  if (isupdate || isremote) {\n    var newhtml = '<div class=\"mdc-select\"><div class=\"mdc-select-title\">select a peer to download from<\/div><select class=\"mdc-select__surface\">';\n    for (var i in app.peers){\n      var p = app.peers[i];\n      var v = getByProperty(p.apps.list, 'id', app.id).version;\n      newhtml += '<option value=\"'+p.id+'\">v'+v+' - '+p.name+' ('+p.id+')<\/option>';\n    }\n    newhtml += '<\/select><div class=\"mdc-select__bottom-line\"><\/div><\/div>';\n    $(ME).find('.peerselect').html(newhtml);\n  }\n  \n  $(ME).find('.runbutton').css('display', isactive ? 'inline-block' : 'none').click(function(){\n    window.location.href = '../'+app.id+'/'+app.index;\n  });\n  \n  $(ME).find('.editbutton').css('display', !isremote ? 'inline-block' : 'none').click(function(){\n    window.location.href = '../metabot/editcontrol.html?db='+app.control.db+'&id='+app.control.id;\n  });\n  \n  $(ME).find('.deactivatebutton').css('display', isactive ? 'inline-block' : 'none').click(function(){\n    json('../metabot/deactivate', 'classname='+encodeURIComponent(app.class), function(result){\n      window.location.href = window.location.href;\n    });\n  });\n  \n  $(ME).find('.activatebutton').css('display', !isactive && !isremote ? 'inline-block' : 'none').click(function(){\n    json('../metabot/activate', 'classname='+encodeURIComponent(app.class), function(result){\n      window.location.href = window.location.href;\n    });\n  });\n  \n  $(ME).find('.uninstallbutton').css('display', !isactive && !isremote ? 'inline-block' : 'none').click(function(){\n    json('../metabot/uninstall', 'appid='+encodeURIComponent(app.id), function(result){\n      window.location.href = window.location.href;\n    });\n  });\n  \n  $(ME).find('.installbutton').css('display', isremote ? 'inline-block' : 'none').click(function(e){\n    var el = $(e.target).closest('.installbutton');\n    el.blur().unbind('click').css('z-index', '5'); //.html('<span class=\"mdc-fab__icon\">get_app<\/span>').animate({'border-radius':'40px','width':'80px','height':'80px','margin-top':'-30px'}, 1000);\n    var card = el.closest('.appcard');\n    \n    var wo = card.find('.whiteout');\n    wo.css('opacity', '0').css('display', 'block').animate({opacity:'0.5'}, 1000);\n\n    var holder = card.find('.installdiv');\n    holder.css('z-index', '4').width(($(ME).width()*0.9)-200);\n\n    app.cb = function(){\n      app.version = app.available;\n      card.find('.appversion').text('v'+app.version);\n      wo.animate({opacity:'0'}, 1000, function(){\n        wo.css('display', 'none');\n      });\n      el.animate({'width': '0px', 'height':'0px'}, 1000, function(){\n        el.remove();\n      });\n      card.find('.peerselect').animate({'opacity': '0'}, 1000, function(){\n        card.find('.peerselect').remove();\n      });\n      var rbut = card.find('.api')[0];\n      installControl(rbut, 'metabot', 'restartbutton', function(result){\n        $(rbut).find('button').addClass('mdc-button mdc-button--raised dark');\n      }, app);\n    };\n    \n    installControl(holder[0], 'metabot', 'installapp', function(api){}, app);\n  });\n  \n  \n  \n  \n\n  \n  \n};\n\n","groups":"anonymous","html":"<section>\n  <div>\n    <p class=\"mdc-card__title\">App ID: <span class='ctlid'><\/span><\/p>\n    <p class=\"mdc-card__subtitle\">Author: <span class='author'><\/span><\/p>\n  <\/div>\n<\/section>\n<div class='installdiv'><\/div>\n<section class=\"mdc-card__supporting-text\"><\/section>\n<section>\n  <button type=\"button\" class=\"mdc-button mdc-button--raised green installbutton\">install<\/button>\n  <button type=\"button\" class=\"mdc-button mdc-button--raised green runbutton\">run<\/button>\n  <button type=\"button\" class=\"mdc-button mdc-button--raised dark editbutton\">edit<\/button>\n  <button type=\"button\" class=\"mdc-button mdc-button--raised deactivatebutton\">deactivate<\/button>\n  <button type=\"button\" class=\"mdc-button mdc-button--raised activatebutton\">activate<\/button>\n  <button type=\"button\" class=\"mdc-button mdc-button--raised uninstallbutton\">uninstall<\/button>\n  <div class='peerselect'><\/div>\n<\/section>\n<section><div class=\"api\"><\/div><\/section>\n<div class=\"whiteout\"><\/div>","ctl":"gjogzq1613db35cc3q7f7","cmd":[],"three":{"controls":[]},"db":"metabot","desc":""},"readers":["anonymous"],"id":"gjogzq1613db35cc3q7f7","sessionid":"jvgvwg16b7a4d277bt3","time":1574954038181,"addr":"/0:0:0:0:0:0:0:1:49184","username":"admin"}