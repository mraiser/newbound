{"data":{"css":"","data":[],"name":"restartbutton","js":"var me = this; \nvar ME = $('#'+me.UUID)[0];\n\nvar STORE = 'a51f6394-730b-4f64-83b0-96ad75f84537';\n\n$(ME).find('#servicesrestartbutton').click(function(){\n  debugger;\n  $(ME).find('#servicesrestartbutton').css('display', 'none');\n  $(ME).find('#servicesrestartmsg').html('<i>Restarting services, please wait.<\/i><br><br>Stopping services...');\n  \n  var UP = true;\n  \n  function waitForIt(xxx){\n    if (xxx) console.log(xxx);\n    console.log('NOT YET - '+(UP ? \"UP\" : \"DOWN\"));\n    \n    \n    \n    $.ajax({\n      type:     \"get\",\n      data:     {uuid: STORE},\n      cache:    false,\n      url:      \"../peerbot/connectionstatus\",\n      dataType: \"json\",\n      error: function (request, error) {\n        console.log(error);\n        $(ME).find('#servicesrestartmsg').html('<i>Services have been stopped.<\/i><br><br>Restarting services...');\n        UP = false;\n        setTimeout(waitForIt, 1000);\n      },\n      success: function (result) {\n        if (result.msg == 'OK') {\n          if (UP) setTimeout(waitForIt, 1000);\n          else {\n            console.log('NOW');\n            $(ME).find('#servicesrestartmsg').html('Restart complete.');\n            window.location.href='index.html';\n          }\n        }\n        else {\n  //        $('#servicesrestartmsg').html('<i>Services have been stopped.<\/i><br><br>Restarting services...');\n          UP = false;\n          setTimeout(waitForIt, 1000);\n        }\n      }\n    });\n  }\n  waitForIt();\n  \n  $.getJSON('../botmanager/restart', function(result) {});\n});","groups":"","ctl":"qnsrxj169538a4ef9o2a1","html":"<button id='servicesrestartbutton' data-theme='b'>RESTART<\/button>\n<div id='servicesrestartmsg'><\/div>","three":{"controls":[]},"db":"metabot","desc":""},"id":"qnsrxj169538a4ef9o2a1","sessionid":"jhtpuq15d03ce0a74q0","time":1551884786822,"addr":"/0:0:0:0:0:0:0:1:56033","username":"mraiser"}