{"data":{"css":".mdl-selectfield.is-focused{\n  border-bottom-color: red;\n}","data":[],"name":"select","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nvar cbs = [];\n\nme.ready = function(){\n  var selid = 'x'+guid();\n  var val = ME.DATA.value ? ME.DATA.value : '';\n  var sellable = ME.DATA.label ? ME.DATA.label : 'Options';\n  var selhtml = '<div class=\"mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label\"><select id=\"'+selid+'\" class=\"mdl-selectfield__select\">';\n  var connectedonly = ME.DATA.connected;\n  \n  var data = ME.DATA.list ? ME.DATA.list : [{name:'opt1', id:'OOO1'},{name:'opt2', id:'OOO2'}];\n\n  if (ME.DATA.allownone && !ME.DATA.value) data.unshift({name:' ', id:'', connected:true});\n  else if (ME.DATA.addlocal) data.unshift({name:'(local)', id:'local', connected:true});\n  if (!val) val = '';\n  \n  me.rebuild = function(){\n    for (var i in data){\n      if (!connectedonly || data[i].connected){\n        var id = data[i].name ? data[i].id : data[i];\n        var name = data[i].name ? data[i].name : data[i];\n        selhtml += '<option value=\"'+id+'\"'+(id == val ? ' selected' : '')+'>'+name+'<\/option>';\n      }\n    }\n    selhtml += '<\/select><label class=\"mdl-selectfield__label\" for=\"'+selid+'\">'+sellable+'<\/label><span class=\"mdl-selectfield__error\">Select a value<\/span><\/div>';\n    $(ME).find('.injectselect').html(selhtml);\n    componentHandler.upgradeAllRegistered();\n\n    $(ME).find('select').on('change', function(x){\n      var val = $(x.target).val();\n      for (var i in cbs) cbs[i](val);\n    });\n  }\n  me.rebuild();\n  \n  if (ME.DATA.cb) me.change(ME.DATA.cb);\n  if (ME.DATA.ready) ME.DATA.ready(me);\n  \n  me.val = function(newval){\n    // FIXME - Should probably just change the value instead of rebuilding\n    val = newval;\n    me.rebuild();\n  };\n};\n\nme.change = function(cb){\n  cbs.push(cb);\n};\n\nme.value = function(){\n  return $(ME).find('select').val();\n};\n\nme.list = function(){\n  return ME.DATA.list;\n};\n","groups":"anonymous","ctl":"uulujx16199aef717n188c","html":"<div class='injectselect'><\/div>\n","three":{"controls":[]},"db":"metabot","desc":""},"readers":["anonymous"],"id":"uulujx16199aef717n188c","sessionid":"jvgvwg16b7a4d277bt3","time":1620673740615,"addr":"/0:0:0:0:0:0:0:1:54514","username":"admin"}