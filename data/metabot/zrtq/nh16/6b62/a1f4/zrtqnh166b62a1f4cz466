{"data":{"css":".outmost{\n  position:relative;\n}\n","data":[],"name":"appselect","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nvar cbs = [];\n\nme.ready = function(){\n  componentHandler.upgradeAllRegistered();\n\n  var validchars = 'abcdefghijklmnopqrstuvwxyz_0123456789';\n\n  function validateString(val){\n    if (val.length == 0) return false;\n    var i = val.length;\n    while (i-->0) if (validchars.indexOf(val.charAt(i)) == -1) return false;\n    return true;\n  }\n  \n  json('../botmanager/listbots', 'includeself=true', function(result){\n    me.apps = result.data;\n    sort();\n    rebuild();\n    if (ME.DATA.cb) me.change(ME.DATA.cb);\n  });\n}\n\nfunction sort(){\n  me.apps.sort(function(a, b) { \n      return a.name > b.name ? 1 : a.name == b.name ? 0 : -1;\n  })\n}\n\nfunction rebuild(){\n  var l = ME.DATA.label ? ME.DATA.label : 'Select an App';\n  var a = ME.DATA.allownone ? true : false;\n\n  var data = {\n    label: l,\n    list: me.apps,\n    value: ME.DATA.value,\n    allownone:a,\n    cb:function(val){\n      for (var i in cbs) cbs[i](val);\n    },\n    ready:function(api){\n      me.select = api;\n      me.value = me.select.value;\n      me.list = me.select.list;\n      me.rebuild = me.select.rebuild;\n      if (ME.DATA.ready) ME.DATA.ready(me);\n    }\n  };\n\n  installControl($(ME).find('.appselwrap')[0], 'metabot', 'select', function(api){}, data);\n}\n\nme.change = function(cb){\n  cbs.push(cb);\n};\n","groups":"anonymous","ctl":"zrtqnh166b62a1f4cz466","html":"<div class='outmost'>\n  <div class='appselwrap'><\/div>\n<\/div>\n<div class='dialogdiv'><\/div>","three":{"controls":[]},"db":"metabot","desc":""},"readers":["anonymous"],"id":"zrtqnh166b62a1f4cz466","sessionid":"jvgvwg16b7a4d277bt3","time":1598888510333,"addr":"/0:0:0:0:0:0:0:1:46802","username":"admin"}