{"data":{"css":"","data":[],"name":"conditionalicon","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.animate = function(model){\n  me.model = model;\n  me.type = \"conditional\";\n  \n  var el = me.modeldiv = $('<div/>');\n  $(ME).append(el);\n  \n  me.update(ME.DATA.condition);\n};\n\nme.update = function(condition){\n  ME.DATA.condition = condition;\n  \n  if (condition.value){\n    if (me.xicon) {\n      me.model.scene.viewer.removeModel(me.xicon);\n      me.xicon = null\n    }\n    if (!me.checkicon){\n      var ctl = {};\n      me.model.scene.viewer.add(me.modeldiv[0], \"flow\", \"checkicon\", function(model){\n        me.checkicon = model.api;\n        model.api.parent = me;\n        me.update(condition);\n      }, ctl, me.model.group);\n      return;\n    }\n  }\n  else {\n    if (me.checkicon) {\n      me.model.scene.viewer.removeModel(me.checkicon);\n      me.checkicon = null;\n    }\n    if (!me.xicon){\n      var ctl = {};\n      me.model.scene.viewer.add(me.modeldiv[0], \"flow\", \"xicon\", function(model){\n        me.xicon = model.api;\n        model.api.parent = me;\n        me.update(condition);\n      }, ctl, me.model.group);\n      return;\n    }\n  }\n  \n  if (condition.rule == \"fail\"){\n    if (me.rulebar){\n      me.model.scene.viewer.removeModel(me.rulebar);\n      me.rulebar = null;\n    }\n    if (!me.failicon){\n      var ctl = {};\n      me.model.scene.viewer.add(me.modeldiv[0], \"flow\", \"failicon\", function(model){\n        me.failicon = model.api;\n        model.api.parent = me;\n        me.update(condition);\n      }, ctl, me.model.group);\n      return;\n    }\n  }\n  else {\n    if (me.failicon){\n      me.model.scene.viewer.removeModel(me.failicon);\n      me.failicon = null;\n    }\n    if (!me.rulebar){\n      var ctl = {\n        \"pos\": new THREE.Vector3(0, 0, 0),\n        \"scale\": new THREE.Vector3(0.5, 0.5, 0.5),\n        \"color\": condition.value ? 0x00FF00 : 0xFF0000\n      };\n      me.model.scene.viewer.add(me.modeldiv[0], \"threejs\", \"shape\", function(model){\n        me.rulebar = model.api;\n        model.api.parent = me;\n        me.update(condition);\n      }, ctl, me.model.group);\n      return;\n    }\n    else {\n      me.rulebar.mesh.material.color.r = condition.value ? 0x00 : 0xFF;\n      me.rulebar.mesh.material.color.g = condition.value ? 0xFF : 0x00;\n      if (condition.rule == \"next\"){\n        me.rulebar.model.rig.pos_x = 3;\n        me.rulebar.model.rig.pos_y = 0;\n        me.rulebar.model.rig.scale_x = 0.5;\n        me.rulebar.model.rig.scale_y = 5;\n      }\n      else {\n        me.rulebar.model.rig.pos_x = 0;\n        me.rulebar.model.rig.scale_x = 5;\n        me.rulebar.model.rig.scale_y = 0.5;\n        if (condition.rule == \"terminate\") me.rulebar.model.rig.pos_y = 3;\n        else if (condition.rule == \"finish\") me.rulebar.model.rig.pos_y = -3;\n      }\n    }\n  }\n};","groups":"","ctl":"vmxpps179b88e518dm15","html":"","three":{"controls":[]},"db":"flow","desc":""},"id":"vmxpps179b88e518dm15","sessionid":"jvgvwg16b7a4d277bt3","time":1622306149749,"addr":"/0:0:0:0:0:0:0:1:51276","username":"admin"}