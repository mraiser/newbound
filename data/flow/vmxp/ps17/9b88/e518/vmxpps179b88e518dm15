{"data":{"data":[],"name":"conditionalicon","groups":"","ctl":"vmxpps179b88e518dm15","three":{"controls":[],"assets":[],"behaviors":[{"name":"animate","id":"182d23dd-bdd0-4f67-80e6-0018437527d4","params":[{"name":"model","type":"object"}],"body":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.model = model;\nme.type = \"conditional\";\n\nvar el = me.modeldiv = $('<div/>');\n$(ME).append(el);\n\nme.update(ME.DATA.condition);\n"},{"name":"update","id":"47c99d97-28d1-47d0-95ef-d5ccc78b5eb4","params":[{"name":"condition","type":"object"}],"body":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nME.DATA.condition = condition;\n\nif (condition.value){\n  if (me.xicon) {\n    me.model.scene.viewer.removeModel(me.xicon);\n    me.xicon = null\n  }\n  if (!me.checkicon){\n    var ctl = {};\n    me.model.scene.viewer.add(me.modeldiv[0], \"flow\", \"checkicon\", function(model){\n      me.checkicon = model.api;\n      model.api.parent = me;\n      me.update(condition);\n    }, ctl, me.model.group);\n    return;\n  }\n}\nelse {\n  if (me.checkicon) {\n    me.model.scene.viewer.removeModel(me.checkicon);\n    me.checkicon = null;\n  }\n  if (!me.xicon){\n    var ctl = {};\n    me.model.scene.viewer.add(me.modeldiv[0], \"flow\", \"xicon\", function(model){\n      me.xicon = model.api;\n      model.api.parent = me;\n      me.update(condition);\n    }, ctl, me.model.group);\n    return;\n  }\n}\n\nif (condition.rule == \"fail\"){\n  if (me.rulebar){\n    me.model.scene.viewer.removeModel(me.rulebar);\n    me.rulebar = null;\n  }\n  if (!me.failicon){\n    var ctl = {};\n    me.model.scene.viewer.add(me.modeldiv[0], \"flow\", \"failicon\", function(model){\n      me.failicon = model.api;\n      model.api.parent = me;\n      me.update(condition);\n    }, ctl, me.model.group);\n    return;\n  }\n}\nelse {\n  if (me.failicon){\n    me.model.scene.viewer.removeModel(me.failicon);\n    me.failicon = null;\n  }\n  if (!me.rulebar){\n    var ctl = {\n      \"pos\": new THREE.Vector3(0, 0, 0),\n      \"scale\": new THREE.Vector3(0.5, 0.5, 0.5),\n      \"color\": condition.value ? 0x00FF00 : 0xFF0000\n    };\n    me.model.scene.viewer.add(me.modeldiv[0], \"app\", \"shape\", function(model){\n      me.rulebar = model.api;\n      model.api.parent = me;\n      me.update(condition);\n    }, ctl, me.model.group);\n    return;\n  }\n  else {\n    me.rulebar.mesh.material.color.r = condition.value ? 0x00 : 0xFF;\n    me.rulebar.mesh.material.color.g = condition.value ? 0xFF : 0x00;\n    if (condition.rule == \"next\"){\n      me.rulebar.model.rig.pos_x = 3;\n      me.rulebar.model.rig.pos_y = 0;\n      me.rulebar.model.rig.scale_x = 0.5;\n      me.rulebar.model.rig.scale_y = 5;\n    }\n    else {\n      me.rulebar.model.rig.pos_x = 0;\n      me.rulebar.model.rig.scale_x = 5;\n      me.rulebar.model.rig.scale_y = 0.5;\n      if (condition.rule == \"terminate\") me.rulebar.model.rig.pos_y = 3;\n      else if (condition.rule == \"finish\") me.rulebar.model.rig.pos_y = -3;\n    }\n  }\n}\n"}],"animations":[],"poses":[]},"db":"flow","attachmentkeynames":["html","css","js"],"desc":""},"id":"vmxpps179b88e518dm15","time":1640454911253,"addr":"/0:0:0:0:0:0:0:1:54092","username":"admin"}
